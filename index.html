<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Store Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- PROGRESSIER -->
    <link rel="manifest" href="https://progressier.app/lBgry4jfbFpQALufNwgN/progressier.json">
    <script defer src="https://progressier.app/lBgry4jfbFpQALufNwgN/script.js"></script>

    <style>
        :root {
            --primary: #6366f1;
            --bg: #f4f6fb;
            --card: #ffffff;
            --text: #1f2937;
            --muted: #6b7280;
        }

        * {
            box-sizing: border-box
        }

        body {
            margin: 0;
            font-family: Inter, system-ui, sans-serif;
            background: var(--bg);
            color: var(--text);
        }

        .app {
            display: flex;
            min-height: 100dvh
        }

        /* ===== SIDEBAR ===== */
        .sidebar {
            width: 240px;
            background: linear-gradient(180deg, #4f46e5, #6366f1);
            color: #fff;
            padding: 20px 16px;
        }

        .sidebar h2 {
            margin: 0 0 24px;
            font-size: 20px;
        }

        .sidebar button {
            width: 100%;
            padding: 12px 14px;
            margin-bottom: 8px;
            border: 0;
            background: transparent;
            color: #fff;
            text-align: left;
            border-radius: 10px;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            gap: 8px;
        }

        .sidebar button:hover,
        .sidebar button.active {
            background: rgba(255, 255, 255, .15);
        }

        /* ===== MAIN ===== */
        .main {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* HEADER */
        .header {
            height: 56px;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, .05);
        }

        .header b {
            font-size: 15px
        }

        .header span {
            font-size: 13px;
            color: var(--muted)
        }

        /* CONTENT */
        .content {
            padding: 20px;
            padding-bottom: 90px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .card {
            background: var(--card);
            padding: 18px;
            border-radius: 14px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, .06);
        }

        .card h3 {
            margin: 0 0 12px;
            font-size: 15px;
        }

        .kpi {
            font-size: 26px;
            font-weight: 700;
        }

        /* TABLE */
        .table-wrap {
            overflow-x: auto
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        th,
        td {
            padding: 12px;
            border-bottom: 1px solid #e5e7eb;
        }

        th {
            text-transform: uppercase;
            font-size: 12px;
            color: var(--muted);
            background: #fafafa;
        }

        tr:hover {
            background: #f9fafb
        }

        /* STATUS */
        .badge {
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 12px;
        }

        .ok {
            background: #dcfce7;
            color: #166534
        }

        .low {
            background: #fef3c7;
            color: #92400e
        }

        .out {
            background: #fee2e2;
            color: #991b1b
        }

        /* SEARCH */
        .search {
            width: 100%;
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #d1d5db;
            margin-bottom: 12px;
        }

        /* BOTTOM NAV */
        .bottom-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 64px;
            background: #fff;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .bottom-nav button {
            border: 0;
            background: none
        }

        canvas {
            width: 100%
        }

        .hidden {
            display: none
        }

        @media(max-width:768px) {
            .sidebar {
                display: none
            }

            .bottom-nav {
                display: flex
            }
        }
    </style>
</head>

<body>
    <div class="app">

        <!-- SIDEBAR -->
        <div class="sidebar">
            <h2>Admin Pro</h2>
            <button class="active" onclick="nav('dashboard',this)">üìä Dashboard</button>
            <button onclick="nav('products',this)">üì¶ S·∫£n ph·∫©m</button>
            <button onclick="nav('orders',this)">üßæ ƒê∆°n h√†ng</button>
            <button onclick="enablePush()">üîî B·∫≠t th√¥ng b√°o</button>
            <p id="pushStatus" style="font-size:13px;margin-top:8px;"></p>
        </div>

        <!-- MAIN -->
        <div class="main">

            <div class="header">
                <b>C·ª≠a h√†ng ABC</b>
                <span>Admin</span>
            </div>

            <div class="content">

                <!-- DASHBOARD -->
                <div id="dashboard" class="screen">
                    <div class="grid">
                        <div class="card">
                            <h3>Doanh thu</h3>
                            <div class="kpi">12.5tr</div>
                        </div>
                        <div class="card">
                            <h3>ƒê∆°n h√¥m nay</h3>
                            <div class="kpi">8</div>
                        </div>
                        <div class="card">
                            <h3>S·∫£n ph·∫©m</h3>
                            <div class="kpi">32</div>
                        </div>
                    </div>
                    <br>
                    <div class="card">
                        <h3>üìà Doanh thu tu·∫ßn</h3>
                        <canvas id="barChart" height="160"></canvas>
                    </div>
                </div>

                <!-- PRODUCTS -->
                <div id="products" class="screen hidden card">
                    <h3>üì¶ S·∫£n ph·∫©m</h3>
                    <input class="search" placeholder="T√¨m s·∫£n ph·∫©m..." oninput="filterProducts(this.value)">
                    <div class="table-wrap">
                        <table>
                            <thead>
                                <tr>
                                    <th>T√™n</th>
                                    <th>Gi√°</th>
                                    <th>T·ªìn</th>
                                    <th>Tr·∫°ng th√°i</th>
                                </tr>
                            </thead>
                            <tbody id="productTable"></tbody>
                        </table>
                    </div>
                </div>

                <!-- ORDERS -->
                <div id="orders" class="screen hidden card">
                    <h3>üßæ ƒê∆°n h√†ng</h3>
                    <input class="search" placeholder="T√¨m ƒë∆°n..." oninput="filterOrders(this.value)">
                    <div class="table-wrap">
                        <table>
                            <thead>
                                <tr>
                                    <th>M√£</th>
                                    <th>Kh√°ch</th>
                                    <th>T·ªïng</th>
                                    <th>Tr·∫°ng th√°i</th>
                                </tr>
                            </thead>
                            <tbody id="orderTable"></tbody>
                        </table>
                    </div>
                </div>

                <!-- SETTINGS -->
                <div id="settings" class="screen hidden card">
                    <h3>üîî Th√¥ng b√°o</h3>
                    <button onclick="Progressier.subscribe()">B·∫≠t th√¥ng b√°o</button>
                </div>

            </div>
        </div>
    </div>

    <!-- MOBILE NAV -->
    <div class="bottom-nav">
        <button onclick="nav('dashboard')">üè†</button>
        <button onclick="nav('products')">üì¶</button>
        <button onclick="nav('orders')">üßæ</button>
        <button onclick="nav('settings')">üîî</button>
    </div>

    <script>
        function enablePush() {

            /* 1Ô∏è‚É£ Check network */
            if (!navigator.onLine) {
                toast("‚ùå Kh√¥ng c√≥ k·∫øt n·ªëi Internet", "error");
                return;
            }

            /* 2Ô∏è‚É£ Check h·ªó tr·ª£ */
            if (!("Notification" in window)) {
                toast("‚ùå Thi·∫øt b·ªã kh√¥ng h·ªó tr·ª£ th√¥ng b√°o", "error");
                return;
            }

            /* 3Ô∏è‚É£ ƒê√£ b·∫≠t r·ªìi */
            if (Notification.permission === "granted") {
                toast("‚úÖ Th√¥ng b√°o ƒë√£ ƒë∆∞·ª£c b·∫≠t");
                document.getElementById("pushStatus").innerText =
                    "Tr·∫°ng th√°i: ƒê√£ b·∫≠t th√¥ng b√°o";
                return;
            }

            /* 4Ô∏è‚É£ B·ªã ch·∫∑n */
            if (Notification.permission === "denied") {
                toast("‚ùå Tr√¨nh duy·ªát ƒëang ch·∫∑n th√¥ng b√°o", "error");
                document.getElementById("pushStatus").innerText =
                    "Tr·∫°ng th√°i: B·ªã ch·∫∑n (h√£y b·∫≠t l·∫°i trong c√†i ƒë·∫∑t)";
                return;
            }

            /* 5Ô∏è‚É£ CH∆ØA H·ªéI ‚Üí H∆Ø·ªöNG D·∫™N */
            toast("üëâ Vui l√≤ng cho ph√©p th√¥ng b√°o trong popup");

            /* 6Ô∏è‚É£ G·ªçi Progressier */
            Progressier.subscribe();

            /* 7Ô∏è‚É£ Ki·ªÉm tra k·∫øt qu·∫£ sau 1s */
            setTimeout(() => {
                if (Notification.permission === "granted") {
                    toast("üéâ B·∫≠t th√¥ng b√°o th√†nh c√¥ng!");
                    document.getElementById("pushStatus").innerText =
                        "Tr·∫°ng th√°i: ƒê√£ b·∫≠t th√¥ng b√°o";
                } else {
                    toast("‚ö†Ô∏è B·∫°n ch∆∞a cho ph√©p th√¥ng b√°o", "error");
                }
            }, 1200);
        }

        /* 8Ô∏è‚É£ Hi·ªÉn th·ªã tr·∫°ng th√°i khi load */
        window.addEventListener("load", () => {
            const el = document.getElementById("pushStatus");
            if (!el) return;

            if (!navigator.onLine) {
                el.innerText = "Tr·∫°ng th√°i m·∫°ng: Offline";
                return;
            }

            if (Notification.permission === "granted") {
                el.innerText = "Tr·∫°ng th√°i: ƒê√£ b·∫≠t th√¥ng b√°o";
            } else {
                el.innerText = "Tr·∫°ng th√°i: Ch∆∞a b·∫≠t th√¥ng b√°o";
            }
        });
        function nav(id, btn) {
            document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'))
            document.getElementById(id).classList.remove('hidden')
            document.querySelectorAll('.sidebar button').forEach(b => b.classList.remove('active'))
            btn && btn.classList.add('active')
        }

        /* DATA */
        const products = [
            { name: "C√† ph√™ s·ªØa", price: 30000, stock: 20 },
            { name: "Tr√† ƒë√†o", price: 35000, stock: 5 },
            { name: "B·∫°c x·ªâu", price: 32000, stock: 0 }
        ]
        const orders = [
            { id: "DH001", customer: "Nguy·ªÖn A", total: 120000, status: "Ho√†n th√†nh" },
            { id: "DH002", customer: "Tr·∫ßn B", total: 80000, status: "ƒêang x·ª≠ l√Ω" }
        ]

        function renderProducts(list = products) {
            const tb = document.getElementById("productTable"); tb.innerHTML = ""
            list.forEach(p => {
                let cls = "ok", txt = "C√≤n"
                if (p.stock === 0) { cls = "out"; txt = "H·∫øt" }
                else if (p.stock < 10) { cls = "low"; txt = "S·∫Øp h·∫øt" }
                tb.innerHTML += `<tr>
<td>${p.name}</td>
<td>${p.price.toLocaleString()}‚Ç´</td>
<td>${p.stock}</td>
<td><span class="badge ${cls}">${txt}</span></td>
</tr>`
            })
        }
        function renderOrders(list = orders) {
            const tb = document.getElementById("orderTable"); tb.innerHTML = ""
            list.forEach(o => {
                tb.innerHTML += `<tr>
<td>${o.id}</td>
<td>${o.customer}</td>
<td>${o.total.toLocaleString()}‚Ç´</td>
<td>${o.status}</td>
</tr>`
            })
        }
        function filterProducts(k) {
            renderProducts(products.filter(p => p.name.toLowerCase().includes(k.toLowerCase())))
        }
        function filterOrders(k) {
            renderOrders(orders.filter(o => o.id.includes(k) || o.customer.toLowerCase().includes(k.toLowerCase())))
        }

        /* BAR CHART */
        function barChart() {
            const c = document.getElementById("barChart"), ctx = c.getContext("2d")
            const d = [5, 8, 6, 10, 12], w = c.width = c.offsetWidth, h = c.height
            ctx.clearRect(0, 0, w, h)
            ctx.fillStyle = "#6366f1"
            d.forEach((v, i) => ctx.fillRect(i * (w / d.length) + 10, h - v * 10, 30, v * 10))
        }
        window.onload = () => {
            renderProducts()
            renderOrders()
            barChart()
        }
        window.onresize = barChart
    </script>
</body>

</html>